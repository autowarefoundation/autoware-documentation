# Planning component design


<!-- 
| No. | Feature |  Description | Requirements  | Reference Implementation | How to run | Default |
| --- | --- | --- | --- | --- | --- | --- | 
| 0   |  走行ルート計画 | 自車位置と目的地から走行ルートを計画する | lanelet地図（走行lanelet） | [Mission Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/mission_planner/) | launch mission_planner | Mandatory for now | 
| 1 | 地図からの経路生成 | 走行するlaneletから地図を生成する | lanelet地図（走行lanelet） | 必須 | launch behavior_path_planner | Mandatory for now | 
| 2 | 地図速度計画| 地図に設定された最大速度になるように加速減速を計画する|  | [Motion Velocity Smoother](https://autowarefoundation.github.io/autoware.universe/main/planning/motion_velocity_smoother/) | launch motion_velocity_smoother| Mandatory for now| 
| 3 | レーンチェンジ | 目的地への到達のために車線変更を行う | lanelet地図（走行lanelet） | [Lane Change](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_lane_change_design/)   | enable flag in both params:   |   true | 
| 4 | 障害物回避| 障害物を回避するために経路を変更する| 認識物体情報| [Avoidance](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_avoidance_design/), [Obstacle Avoidance Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_avoidance_planner/)  | enable flag in param:  launch obstacle_avoidance_planner | true| 
| 5 |障害物停止 |経路上に障害物が有る場合に、停止する |認識物体情報 | [Obstacle Stop Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_stop_planner/),  [Obstacle Cruise Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_cruise_planner/) |launch obstacle_stop_planner and enable flag: TODO , launch obstacle_cruise_planner and enable flag: TODO | true |
| 6 | 障害物減速  | 経路近傍に障害物がある場合に、減速する | 認識物体情報 |  [Obstacle Stop Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_stop_planner/),  [Obstacle Cruise Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_cruise_planner/) | | true |
| 7 | 前方車追従 | 経路前方に車両が走行している場合に、前方車両の速度に合わせて自車速度を調節する | 認識物体情報 |  [Obstacle Stop Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_stop_planner/),  [Obstacle Cruise Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_cruise_planner/) | | true | 
| 8 | カットイン予測減速 | 自車走行レーンに他車がカットインして来ることを予測して、速度を減速する | 認識物体情報 | [Obstacle Cruise Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_cruise_planner/)                      | - | true |
| 9 | 発進時 障害物確認 | 発進時に周囲に障害物がある場合は、停止を継続する | 認識物体情報 |      [Surround Obstacle Checker](https://autowarefoundation.github.io/autoware.universe/main/planning/surround_obstacle_checker/)                 | - | true |
| 10 | カーブ減速 | カーブ時に速度を減速させる | - |  [Motion Velocity Smoother](https://autowarefoundation.github.io/autoware.universe/main/planning/motion_velocity_smoother/)| - | true |
| 11 | カーブ障害物減速 | カーブ時に近傍の障害物を考慮して速度を減速させる | 認識物体情報・lanelet地図（障害物情報） | [Obstacle Velocity Limiter](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_velocity_limiter/) | - | true |
| 12 | 走行経路平滑化 | 走行経路を平滑化し、滑らかな走行を行う | lanelet地図（走行lanelet） | [Obstacle Avoidance Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_avoidance_planner/)| - | true |
| 13 | 狭路走行 | 走行可能領域内に収まって走行するための経路計画を行う。走行可能領域外に出てしまう場合は領域の前で停止計画を行う。 | lanelet地図（高精度なlane boundaraies）| [Obstacle Avoidance Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_avoidance_planner/) | - | true |
| 14 | 路肩駐車 | 路肩レーンに幅寄せをして停車する | lanelet地図（路肩lane） | [Goal Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_goal_planner_design/) | - | true |
| 15 | 路肩発進 | 路肩レーンから発進を行う | lanelet地図（路肩lane） | [Pull Out Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_pull_out_design/) | - | true |
| 16 | 経路シフト | 外部指示に応じて、走行経路を横方向にシフトする | - | [Side Shift Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_side_shift_design/)| - | true |
| 17 | 横断歩道停止 | 横断歩道を歩行している・進入してくる歩行者に対して、減速・停止計画を行う | 認識物体情報・lanelet地図（横断歩道） | [Crosswalk Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/crosswalk-design/)| - | true |
| 18 | 交差点 対向車確認 | 交差点右左折時において、対向車を確認して交差点への進入判断を行う | 認識物体情報・lanelet地図（交差点レーン・yieldレーン） | [Intersection Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/intersection-design/) | - | true |
| 19 | 交差点 後方確認 | 交差点右左折時において、後続車両や後続二輪車に対する巻き込み確認を行う。 | 認識物体情報・lanelet地図（交差点レーン） | [Intersection Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/intersection-design/) | - | true |
| 20 | 交差点 死角確認 (WIP) | 交差点右左折時において、対向車確認時に死角を考慮した頭出しを行う | 認識物体情報・lanelet地図（交差点レーン） | [Intersection Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/intersection-design/) | - | true |
| 21 | 交差点 渋滞検知 | 交差点進入時に、交差点の先が渋滞している場合は交差点進入手前で停止する | 認識物体情報・lanelet地図（交差点レーン） | [Intersection Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/intersection-design/) | - | true |
| 22 | 信号停止 | 信号の状態に応じて、信号停止線で停止・発進を行う | 信号認識情報 | [Traffic Light Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/traffic-light-design/) | - | true |
| 23 | 飛び出し検知 | 経路近傍の物体が経路に飛び出す可能性を考慮して、減速計画を行う | 認識物体情報 | [Run Out Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/run-out-design/) | - | true |
| 24 | 一時停止線 停止 | 一時停止線で停止計画を行う | lanelet地図（一時停止線） | [Stop Line Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/stop-line-design/) | - | true |
| 25 | 死角減速 | 死角からの物体の飛び出しを考慮して、減速計画を行う | 認識物体情報・lanelet地図（private/publicレーン） | [Occlusion Spot Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/occlusion-spot-design/) | - | true |
| 26 | 停止禁止区域 | 停止禁止区域での停止しないように、区域の前で停止を行う。 | lanelet地図（停止禁止区域） | [No Stopping Area Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/no-stopping-area-design/) | - | true |
| 27 | 私有地からの公道合流 | 公道合流時に他車との安全確認を行う。 | - | [Merge from Private Area Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/merge-from-private-design/) | - | true |
| 28 | スピードバンプ | スピードバンプに対して減速計画を行う | lanelet地図（speed_bump） | [Speed Bump Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/speed-bump-design/) | - | true |
| 29 | 指定領域内の障害物検知による停止 | Detection Area | lanelet地図（障害物検知エリア） | [Detection Area Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/detection-area-design/) | - | true |
| 30 | レーン逸脱時の衝突検知 | 自車レーンから逸脱して走行する場合に、速度を調整して逸脱先のレーンを走行中の他車との競合を防ぐ | - | [Out of Lane Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/out-of-lane-design/) | - | true |
| 31 | out of ODD | ODD外の領域に進入しないように、停止計画を行う | lanelet地図（invalid lane） | WIP                     | - | true |
| 32 | 駐車計画 | 駐車エリアにおいて、与えられたゴールに対して駐車計画を行う | 障害物情報・lanelet地図（障害物検知エリア） | [Free Space Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/freespace_planner/) | - | true |
| 33 | MRM | センサー故障や認識精度低下などの走行状態に応じて、緩停止や路肩駐車などの適切な動作を支持する | TODO | TODO |  - | true |
| 34 | Planning Validation | 計画された軌道が安全で適切なものであるかを判断する | TODO | [Planning Validator](https://autowarefoundation.github.io/autoware.universe/main/planning/planning_validator/) | - | true |
| 35 | 走行レーン地図生成| 手動で走行した経路から地図レーンを生成する| -| WIP| TODO | true|
| 36 | 走行レーン最適化 | 地図の走行レーンの中央線（reference path）に対して経路を最適化する | TODO |  [Static Centerline Optimizer](https://autowarefoundation.github.io/autoware.universe/main/planning/static_centerline_optimizer/)  | -| true| 
 -->


| No. | Feature | Description | Requirements | Reference Implementation | How to run | Default |
| --- | --- | --- | --- | --- | --- | --- |
| 0 | Route Planning | Plan a route from the vehicle's position to the destination | Lanelet map (driving lanelets) | [Mission Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/mission_planner/) | `launch mission_planner` | Mandatory for now |
| 1 | Route Generation from Map | Generate a map from the driving lanelets | Lanelet map (driving lanelets) | Required | `launch behavior_path_planner` | Mandatory for now |
| 2 | Map Velocity Planning | Plan acceleration and deceleration to achieve the maximum speed set in the map |  | [Motion Velocity Smoother](https://autowarefoundation.github.io/autoware.universe/main/planning/motion_velocity_smoother/) | `launch motion_velocity_smoother` | Mandatory for now |
| 3 | Lane Change | Change lanes to reach the destination | Lanelet map (driving lanelets) | [Lane Change](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_lane_change_design/) | Enable flag in both parameters: `true` |
| 4 | Obstacle Avoidance | Change the route to avoid obstacles | Recognized object information | [Avoidance](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_avoidance_design/), [Obstacle Avoidance Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_avoidance_planner/) | Enable flag in parameter: `launch obstacle_avoidance_planner true` |
| 5 | Obstacle Stop | Stop if there is an obstacle on the route | Recognized object information | [Obstacle Stop Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_stop_planner/), [Obstacle Cruise Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_cruise_planner/) | `launch obstacle_stop_planner` and enable flag: `TODO`, `launch obstacle_cruise_planner` and enable flag: `TODO` | `true` |
| 6 | Obstacle Deceleration | Decelerate if there is an obstacle near the route | Recognized object information | [Obstacle Stop Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_stop_planner/), [Obstacle Cruise Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_cruise_planner/) |  | `true` |
| 7 | Front Vehicle Following | Adjust the vehicle's speed to match the speed of the vehicle in front of it if it is driving on the route | Recognized object information | [Obstacle Stop Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_stop_planner/), [Obstacle Cruise Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_cruise_planner/) |  | `true` |
| 8 | Cut-in prediction deceleration | Predicts the cut-in of other vehicles in the host vehicle's lane and decelerates the speed. | Object recognition information | [Obstacle Cruise Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_cruise_planner/) | - | true |
| 9 | Obstacle check at start | If there is an obstacle around when starting, continue stopping. | Object recognition information | [Surround Obstacle Checker](https://autowarefoundation.github.io/autoware.universe/main/planning/surround_obstacle_checker/) | - | true |
| 10 | Curve deceleration | Decelerates the speed on a curve. | - | [Motion Velocity Smoother](https://autowarefoundation.github.io/autoware.universe/main/planning/motion_velocity_smoother/) | - | true |
| 11 | Curve obstacle deceleration | Decelerates the speed while considering nearby obstacles on a curve. | Object recognition information, lanelet map (obstacle information) | [Obstacle Velocity Limiter](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_velocity_limiter/) | - | true |
| 12 | Route smoothing | Smooths the route and achieves smooth driving. | Lanelet map (driving lanelet) | [Obstacle Avoidance Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_avoidance_planner/) | - | true |
| 13 | Narrow road driving | Plans the route to stay within the drivable area. If it goes out of the area, it plans to stop before the area. | Lanelet map (high-precision lane boundaries) | [Obstacle Avoidance Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/obstacle_avoidance_planner/) | - | true |
| 14 | Shoulder parking | Parks by hugging the shoulder lane. | Lanelet map (shoulder lane) | [Goal Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_goal_planner_design/) | - | true |
| 15 | Shoulder start | Starts from the shoulder lane. | Lanelet map (shoulder lane) | [Pull Out Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_pull_out_design/) | - | true |
| 16 | Route shift | Shifts the route laterally in response to external instructions. | - | [Side Shift Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_path_planner/docs/behavior_path_planner_side_shift_design/) | - | true |
| 17 | Pedestrian crossing stop | Decelerates and plans to stop for pedestrians walking on or approaching a pedestrian crossing. | Object recognition information, lanelet map (pedestrian crossing) | [Crosswalk Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/crosswalk-design/) | - | true |
| 18 | Intersection Oncoming Vehicle Detection | Determine whether it is safe to enter an intersection while making a right or left turn by checking for oncoming vehicles | Object recognition information and lanelet map (intersection lane and yield lane) | [Intersection Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/intersection-design/) | - | true |
| 19 | Intersection Rear-end Collision Detection | Check for potential rear-end collisions with other vehicles or motorcycles when making a right or left turn at an intersection | Object recognition information and lanelet map (intersection lane) | [Intersection Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/intersection-design/) | - | true |
| 20 | Intersection Blind Spot Detection (WIP) | Perform a head check while checking for oncoming vehicles at an intersection to consider blind spots | Object recognition information and lanelet map (intersection lane) | [Intersection Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/intersection-design/) | - | true |
| 21 | Intersection Traffic Jam Detection | Stop before entering an intersection if there is a traffic jam ahead | Object recognition information and lanelet map (intersection lane) | [Intersection Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/intersection-design/) | - | true |
| 22 | Stop at Traffic Lights | Stop and go according to the state of the traffic lights | Traffic light recognition information | [Traffic Light Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/traffic-light-design/) | - | true |
| 23 | Run-out Detection | Plan deceleration to account for the possibility of objects near the path running out into it | Object recognition information | [Run Out Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/run-out-design/) | - | true |
| 24 | Stop at Stop Lines | Plan a stop at stop lines | Lanelet map (stop line) | [Stop Line Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/stop-line-design/) | - | true |
| 25 | Blind Spot Deceleration | Plan deceleration to account for objects running out from blind spots | Object recognition information and lanelet map (private/public lane) | [Occlusion Spot Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/occlusion-spot-design/) | - | true |
| 26 | No Stopping Area | Stop before the area to avoid stopping in a no-stopping area | Lanelet map (no stopping area) | [No Stopping Area Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/no-stopping-area-design/) | - | true |
| 27 | Merge from Private Area to Public Road | Check for safety with other vehicles when merging onto a public road from a private area | - | [Merge from Private Area Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/merge-from-private-design/) | - | true |
| 28 | Speed Bump | Plan deceleration for speed bumps | lanelet map (speed_bump) | [Speed Bump Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/speed-bump-design/) | - | true |
| 29 | Stop due to obstacle detection in designated area | Detection Area | lanelet map (obstacle detection area) | [Detection Area Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/detection-area-design/) | - | true |
| 30 | Collision detection when deviating from lane | Adjust speed to avoid conflict with other vehicles driving in the deviated lane when deviating from own lane | - | [Out of Lane Module](https://autowarefoundation.github.io/autoware.universe/main/planning/behavior_velocity_planner/out-of-lane-design/) | - | true |
| 31 | Stop planning to avoid entering out of ODD area | lanelet map (invalid lane) | WIP | - | true |
| 32 | Parking planning | Plan parking for given goal in parking area | Obstacle information and lanelet map (obstacle detection area) | [Free Space Planner](https://autowarefoundation.github.io/autoware.universe/main/planning/freespace_planner/) | - | true |
| 33 | MRM | Support appropriate actions such as gradual stop or roadside parking depending on driving conditions such as sensor failure or recognition accuracy degradation | TODO | TODO | - | true |
| 34 | Planning Validation | Determine if the planned trajectory is safe and appropriate | TODO | [Planning Validator](https://autowarefoundation.github.io/autoware.universe/main/planning/planning_validator/) | - | true |
| 35 | Running Lane Map Generation | Generate lane map from manually driven path | - | WIP | TODO | true |
| 36 | Running Lane Optimization | Optimize route for the centerline (reference path) of the running lane map | TODO | [Static Centerline Optimizer](https://autowarefoundation.github.io/autoware.universe/main/planning/static_centerline_optimizer/) | - | true |
